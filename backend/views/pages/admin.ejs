﻿<!-- backend\views\pages\admin.ejs -->
<!-- Содержимое страницы администратора -->

<% /* Этот шаблон включится внутрь <div class="content"> в layout.ejs */ %>

<div class="content_side__left">
    <!-- Блок 1: Админ меню / Ссылки -->
    <section class="admin-menu func-section__vertical sticky">
        <h2>Администрирование</h2>
        <ul>
            <li><a href="#add-product-form-section">Добавить продукт</a></li>
            <li><a href="#edit-product-form-section">Редактировать продукт</a></li>
            <li><a href="#admin-product-list-section">Список продуктов</a></li>
            <li><a href="#contact-messages-section">Сообщения обратной связи</a></li>
            <li><a href="#users-list-section">Пользователи</a></li>
            <li><a href="/logs/requests.log" target="_blank">Логи запросов</a></li>
            <li><a href="/logs/errors.log" target="_blank">Логи ошибок</a></li>
        </ul>
    </section>
    <!-- Блок 2: Статистика -->
    <section class="admin-stats func-section__vertical">
        <h2>Статистика</h2>
        <p>Всего продуктов: <span id="total-products">-</span></p>
        <p>Всего пользователей: <span id="total-users">-</span></p>
        <p>Всего сообщений: <span id="total-messages">-</span></p> <!-- Исправил ID и текст -->
    </section>
</div>
<div class="content_center">
    <h2>Панель администратора</h2>

    <!-- Блок 3: Форма добавления продукта -->
    <section id="add-product-form-section" class="func-section__vertical">
        <div class="toggle-form_container drop-down interactive">
            <h2 class="toggle-form_header">Добавить продукт</h2>
            <img src="/icons/chevron-down.svg" class="arrow-down-icon" alt="">
        </div>
        <form id="add-product-form" class="hidden-form__vertical hidden-form">
            <label class="input-container">
                <span>Название</span>
                <input type="text" id="name" placeholder="Название" required>
            </label>
            <label class="input-container">
                <span>Категория</span>
                <input type="text" id="category" placeholder="Категория" required>
            </label>
            <label class="input-container">
                <span>Описание</span>
                <input type="text" id="description" placeholder="Описание"> <!-- Описание не обязательное -->
            </label>
            <label class="input-container">
                <span>Цена</span>
                <input type="number" id="price" placeholder="Цена" required min="0.01" step="0.01"> <!-- Валидация в HTML -->
            </label>
            <label class="input-container">
                <span>Продавец</span>
                <input type="text" id="seller" placeholder="Продавец" required>
            </label>
            <label class="input-container">
                <span>Количество</span>
                <input type="number" id="quantity" placeholder="Количество" required min="0" step="1"> <!-- Валидация в HTML -->
            </label>
            <button type="submit">Добавить продукт</button>
            <div id="add-form-errors" class="errors-display"></div>
            <div id="add-form-success" class="success-display"></div> <!-- Добавил div для успеха -->
        </form>
    </section>

    <!-- Блок 4: Форма редактирования продукта -->
    <section id="edit-product-form-section" class="func-section__vertical">
        <div class="toggle-form_container drop-down interactive">
            <h2 class="toggle-form_header">Редактировать продукт</h2>
            <img src="/icons/chevron-down.svg" class="arrow-down-icon" alt="">
        </div>
        <form id="edit-product-form" class="hidden-form__vertical hidden-form">
            <label class="input-container">
                <span>ID</span>
                <input type="text" id="edit-id" placeholder="ID продукта" required readonly>
            </label>
            <label class="input-container">
                <span>Название</span>
                <input type="text" id="edit-name" placeholder="Новое название">
            </label>
            <label class="input-container">
                <span>Категория</span>
                <input type="text" id="edit-category" placeholder="Новая категория">
            </label>
            <label class="input-container">
                <span>Описание</span>
                <input type="text" id="edit-description" placeholder="Новое описание">
            </label>
            <label class="input-container">
                <span>Цена</span>
                <input type="number" id="edit-price" placeholder="Новая цена" min="0.01" step="0.01">
            </label>
            <label class="input-container">
                <span>Продавец</span>
                <input type="text" id="edit-seller" placeholder="Новый продавец">
            </label>
            <label class="input-container">
                <span>Количество</span>
                <input type="number" id="edit-quantity" placeholder="Новое количество" min="0" step="1">
            </label>
            <button type="submit">Сохранить изменения</button>
            <div id="edit-form-errors" class="errors-display"></div>
            <div id="edit-form-success" class="success-display"></div> <!-- Добавил div для успеха -->
        </form>
    </section>

    <!-- Блок 5: Список продуктов для выбора (для редактирования/удаления) -->
    <section id="admin-product-list-section" class="products-section func-section__vertical">
        <h2>Продукты</h2>
        <p>Кликните по карточке продукта в списке ниже, чтобы автоматически заполнить форму редактирования.</p>
        <div id="admin-product-list" class="product-grid">
            <!-- Продукты будут добавлены сюда скриптом fetchAdminProducts -->
            <p>Загрузка продуктов...</p>
        </div>
    </section>

    <!-- Блок 6: Сообщения обратной связи -->
    <section id="contact-messages-section" class="func-section__vertical">
        <h2>Сообщения обратной связи</h2>
        <div id="contact-messages-list"> <!-- Здесь будет список сообщений -->
            <p>Загрузка сообщений...</p>
        </div>
    </section>

    <!-- Блок 7: Управление пользователями -->
    <section id="users-list-section" class="func-section__vertical">
        <h2>Пользователи</h2>
        <div id="users-list-container"> <!-- Здесь будет список пользователей -->
            <p>Загрузка пользователей...</p>
        </div>
    </section>

</div>
<div class="content_side__right">
    <!-- Блок 8: Инструкции для админа -->
    <section class="info-block func-section__vertical sticky">
        <h2>Инструкции</h2>
        <p>Используйте формы в центре для добавления и редактирования продуктов.</p>
        <p>Для удаления продукта, кликните по нему в списке и нажмите кнопку "Удалить" на карточке.</p>
        <p>Просматривайте сообщения пользователей и список зарегистрированных пользователей ниже.</p>
    </section>
</div>